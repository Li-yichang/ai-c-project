# 使用 MIMIC-IV 數據預測住院死亡率 

## 專案概述
本專案利用 MIMIC-IV 數據集預測住院死亡率 。透過分析病患進入 ICU 後前 6 小時內的生命體徵、實驗室結果和人口統計信息，建立早期預警系統 。


## 數據與預處理
本研究使用 MIMIC-IV 數據集，包含超過 70,000 筆 ICU 入院數據 。

### 樣本篩選 (Cohort Selection)
最終篩選出 16,799 筆 ICU 住院數據 ：
*每位病患僅保留第一次 ICU 住院紀錄 。
* ICU 住院時間至少滿 6 小時。
* 出院前至少有 6 小時的測量數據 。



### 特徵工程
提取了超過 60 個特徵 ]：
* **人口統計**：年齡、性別和 BMI 。
* **生命體徵**：心率、呼吸頻率、平均動脈壓 (MAP)、收縮壓 (SBP) 和體溫 。
* **實驗室結果**：BUN、肌酸酐、血糖、膽紅素、血紅蛋白、血小板等 。
* **診斷**：使用 Multi-hot 編碼的最頻繁前 10 名 ICD 代碼 。



## 模型架構
專案開發了兩套流程以探索性能權衡 ：

1. **版本 1 (基準模型)**：
    * 基本特徵聚合（均值、最小值、最大值、標準差）。
    * 使用邏輯斯迴歸 (Logistic Regression) 和隨機森林 (Random Forest) 。
    * 預設分類閾值為 0.5 。

2. **版本 2 (增強模型)**：
    * 引入類別權重 (Class Weighting) 處理數據不平衡 。
    * 將預測閾值調整為 0.3 以增加敏感度 。
    * 加入 XGBoost 模型 。



## 實驗結果
[cite_start]實驗數據如下表 [cite: 216]：

| 變體 | 模型 | 準確率 | ROC AUC | 精確率 | 召回率 | F1 分數 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 基準 | 邏輯斯迴歸 | 0.703 | 0.763 | 0.354 | 0.682 | 0.466 |
| 基準 | 隨機森林 | 0.828 | 0.792 | 0.819 | 0.121 | 0.210 |
| **增強** | **邏輯斯迴歸** | 0.480 | 0.763 | 0.257 | **0.918** | 0.401 |
| **增強** | **隨機森林** | 0.796 | 0.792 | 0.462 | 0.470 | 0.466 |
| **增強** | **XGBoost** | 0.669 | 0.786 | 0.337 | 0.763 | **0.467** |

## 結論
* [cite_start]增強版邏輯斯迴歸達到了最高的召回率 (0.918)，適用於病患篩查 [cite: 320, 334]。
* [cite_start]XGBoost 提供了最平衡的 F1 分數 (0.467) [cite: 330, 339]。
* [cite_start]閾值調優在處理醫療數據不平衡中至關重要 [cite: 341, 351]。
   
